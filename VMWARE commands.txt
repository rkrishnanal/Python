Purple screen on death
the vmkernel of an esx/esxi host experience a crtical error.
PSOD contains the memory state at the time of crash that includes
Esxi verison, Error type uptime and Core dump locations.

Resaons 
hardware >> Due to DIMM ,cpu , Disk error
software bugs >> Esxi patch bugs
Drivers firmware bugs.

COMMDANS FOR PSOD
cd var/Core


VMWARE COMMANDs
esxcli hardware cpu list  >>>To check the hardware
esxcli hardware memory get  >> To check memory detaisl


Performance issue

esxtop 
h >> list out all options

c-cpuview
m-memory view
n-netowrkview
v -vmview

To captiure performance
esxop -b(batch) -d(delay) -n(no.iteration) 100(count) > filename.csv


To Volumes

ls/vmfs/volumes/(datastorage name)

To updated patching through command

esxcli software vib update --depo=ls/vmfs/volumes/(datastorage name)/Patch filename

to check 
vmare -vl

FULL PATCHES Detials

esxcli software vib list | more

#df -h  shows the disk space of the files

#SUPPORT LOGS
vm-support -w /vmfs/volumes/(datastorage name)

ping -b(boardcast)  8.8.8.8

#Firewall
esxcli network firewall get >> To know firewall details
esxcli network firewall ruleset list >> show all the list
esxcli network firewall refresh
esxcli hardware
esxcli software

#Restart service
services.sh Restart

#performance
esxtop

#LOGS
cd /var/log/
less 

cat (logname) >> View the LOGS
Vi (logname) >> edit the log name 

#Vmware vm logs 
cd /vmsfs/volumes/(datastorage_name)/vm/vm(logname) | more

to search network COMMANDs
esxcli network

Resoruce pool
logical abstraction of cpu and memory rresoruces
use resource pool to share , limit and reservation of resource for vms
Provides better allocating of cpu and memory resources by using resroces pool 
DRS must be enabled on cluster before creating resource pool.

#LOGS
hostd.log >> incuding VM and host task  and events communication with the vsphere client
and vcenter vpax agent and sdk connections
 
 #HA
 vSphere HA is a new host agent called the Fault Domain Manager, or FDM. T
 his agent is responsible for monitoring host availability and the power state of protected VMs, with the mission 
 of restarting protected VMs when a host or VM fails.

 The master host  sends periodic  heartbeats to the slave host so that the slave hosts know
 that master host is alive

#FAiled SLave host
when a slave host does not respond to the network heartbeat issued by the master host 
the master vsphere HA agent tries to identify cause.

#Failed Master host
when the master host is placed in maintainence mode or crashes the slave hosts 
detect that the master is no longer issuing heaters

Manager Object ID >> MOID based comes to know either master and slave

#Isolated host
if the host does not observe election traffic on the managment and cannot
ping its default gateway, the host isolated 

#VM Storage Failure
VM n/w failure 
Array misconfiguration
Power outrage
Vm availability is affected host are managed 
Application with attached crash.

#VM PATCH UPATE COMMDANS
vmi-cmd hostsvc/maintainence_mode_enter
esxcli software vib update -d "/vmfs/(Path name)


VMWARE COMMANDs
to know all vms
vim-cmd /vmsvc/getallvms >> to see all your VM in host
vim-cmd /vmsvc/power.on (Vim id) >> TO power on vmvc
vim-cmd /vmsvc/power.off (vim id)
vim-cmd /vmsvc/power.getstate (Vmid)

#to get world ID
esxcli vm porcess list
3 types
* (soft,hard,force)
esxcli vm process kill -w (WORLD ID) -T (soft,hard, force)

To check COMMANDslit 
vim-cmd /vmsvc >> list out all vmware details

To unregister Vm
vim-cmd /vmsvc/unregister 11
To register Vm
vim-cmd /solo/register /vmfs/volume/datastorage_name/vmname /vname.vmx

VMWARE FILESYSTEM

.vmsd >> vmware snapshot meta data 
.vmdk >> vm data files
.nvramm >> Vm memory
.vmx >> Vm configuration 

VMware Application
vsca.01a.crop.local:5480

#VM files
configuration file .vmx
swap >> vswap
bios >> nvramm
log >> .log
raw device map file >> rdm.vmdk
Disk descriptor file >> .vmdk
Disk data file >> flat.vmdk >> 
snapshot >> .vmsd
snapshot state file >> .vmsn
snapshot descriptor file >> 0001.vmdk
snapshot disk files >> delta.vmdk

Max 32 snapshot able create 

#Conslidation

snapshot Error
Possbile Cause: Missing delta descriptor file
A snapshot (delta) file does not have an associate descriptor file
if the -delta.vmdk has no descriptor file copy and rename

Possbile Cause: Max file size reached
VMFS-5 the tops file size is about 62TB

Insufficient Space on datastorage

#VM POWER on fails

View the erorr message vmware.log
looks hints as to why power-on fails

Cause: VM file Missing
restore the missing files or files from your backup

Cause: VM file Locked

Cause:  Insufficient resource on esxi host
check cpu,memory and storage resource availability on the esxi host.
Decrease the cpu and memory reservations on the virtual machince

Cause: ESXI host unresponsive

ping vmkernel network interface

POWER




#Enable and disable maintainence mode
esxcli system maintainenceMode set --enable True
esxcli sytem shutdown reboot --reasons Training - delay 10

#POWERCLI COMMDANS
stop-vm -kill ("VMname") -confirm:$false
